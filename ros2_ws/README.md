# ROS2 Assignment – e0509_control

본 프로젝트는 ROS2 환경에서 Python 기반 노드를 구현하는 과제로
ROS2 패키지 구조를 준수하여 `colcon build` 및 `ros2 run` 명령으로
정상 실행이 가능하도록 구성하였다.


## 1. 실행 매뉴얼
### 1) Project Structure
```
ros2_ws/
├─ src/
│ └─ e0509_control/
│ ├─ package.xml
│ ├─ setup.py
│ ├─ setup.cfg
│ ├─ resource/
│ │ └─ e0509_control
│ └─ e0509_control/
│ ├─ init.py
│ └─ my_node.py
├─ ROS2를_이용한_로봇암.pptx
├─ README.md
└─ requirements.txt
```

### 2) Environment

- OS: Ubuntu 20.04 / 22.04
- ROS2: Humble
- Python: 3.10.12
- Build Tool: colcon
- Package Type: ament_python

### 3) External Dependency (Doosan Robot)

본 과제는 Doosan 로봇 암 ROS2 패키지를 기반으로 동작한다.  
해당 패키지는 본 레포지토리에 포함하지 않으며,
아래와 같이 별도로 다운로드하여 사용한다.

#### Doosan Robot Package 다운로드 및 실행

```bash
cd ros2_ws/src
git clone https://github.com/doosan-robotics/doosan-robot2.git
cd ros2_ws
colcon build
source install/setup.bash
ros2 run e0509_control my_node
```

## 2. 작동로직

```
1. 노드 실행 및 ROS2 초기화
2. Doosan 로봇 패키지 및 제어 인터페이스 준비
3. 사용자 설정값 입력
4. 입력값 검증 및 목표 좌표 리스트 생성
5. 목표 좌표를 순차적으로 경로 계획 및 실행 요청
6. 실행 중 로봇 상태/ 진행 상황을 로그로 출력
7. 모든 목표 수행 후 종료
```

## 3. 각 기능 설명

```
1. 좌표 기준 처리 기능(절대/상대)
- 절대 좌표 : 로봇 base 좌표계를 기준으로 목표 위치를 해석한다.
- 상대 좌표 : 현재 End-Effector 위치를 기준으로 입력값을 이동량으로 해석한다.
- 좌표 기준에 따라 최종 목표 좌표가 계산되어 실행 단계에 전달된다.

2. 다중 목표 좌표 처리 기능
- 목표 좌표는 1개 이상 입력 가능하며 입력된 순서대로 순차 실행된다.
- 각 목표 좌표는 독립적으로 실행 요청되며 완료 후 다음 목표로 진행한다.

3. 속도/가속도 제한 기능
- 사용자가 입력한 최대 속도(0~1)와 최대 가속도(0~1)를 실행 조건으로 사용한다.
- 급격한 움직임을 방지하고 안정적인 이동을 유도한다.

4. 실행 제어 기능
- 실행 명령이 들어오면 목표 좌표 리스트를 순차적으로 처리한다.
- 실행 중 중복 실행이 발생하지 않도록 실행 상태를 관리한다.

5. 상태 모니터링 및 로그 출력 기능
- 실행 과정에서 로봇의 진행 상태 및 결과를 로그로 출력한다.
- 사용자 확인을 위해 '로봇 상태'와 '실시간 로그'영역에 정보를 제공한다.
```

## 4. UI 구성

```
1. 좌표 기준 선택
- 상단 드롭다운에서 '절대좌표' 또는 '상대 좌표'를 선택한다.
- 선택 값은 목표 좌표 해석 방식에 반영된다.

2. 목표 좌표 입력(테이블)
- '목표 좌표(3개)' 테이블의 X,Y,Z칸에 목표 값을 입력한다.
- 여러 목표를 입력하면 입력된 순서대로 순차 실행된다.

3. 최대 속도 및 가속도 입력
- '최대 속도(0~1)' 및 '최대 가속도(0~1)' 입력창에 값을 입력한다.
- 값이 클수록 속도 및 가속도 변화가 빠르다.

4. 실행 버튼
- '실행' 버튼을 누르면 입력된 설정값을 기반으로 로봇 제어가 시작된다.

5. 상태/로그 확인
- '로봇 상태' 영역 : 현재 진행 상황(대기/실행/완료 등)을 확인한다.
- '실시간 로그' 영역 : 목표 좌표 처리 순서, 실행 결과, 오류 메시지 등을 확인한다.
```

## 5. 프레임워크

```
- ROS2 : 노드 실행 및 통신 구조 제공
- Doosan-robot2 : Doosan 로봇 ROS2 패키지
- MoveIt2 /Rviz : 경로 계획 및 시각화 지원
- PyQt : 사용자 입력 GUI 제공
```
